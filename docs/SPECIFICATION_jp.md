# 機能仕様書

## 1. ユーザー認証
### 1.1 サインアップ
- **アクター**: ゲストユーザー
- **アクション**: メールアドレスとパスワードを入力してアカウントを作成する。
- **システムの振る舞い**:
    - メールアドレスの形式とパスワードの強度 (6文字以上) を検証する。
    - Supabase Auth に新しいユーザーを作成する。
    - 確認メールを送信する (Supabase で有効な場合) か、即座にログインする。
    - 成功時にダッシュボードへリダイレクトする。

### 1.2 ログイン
- **アクター**: ゲストユーザー
- **アクション**: 登録済みのメールアドレスとパスワードを入力する。
- **システムの振る舞い**:
    - Supabase Auth で認証を行う。
    - 成功時にダッシュボードへリダイレクトする。
    - 失敗時にエラーメッセージを表示する。

### 1.3 ログアウト
- **アクター**: ログインユーザー
- **アクション**: ダッシュボードの「ログアウト」ボタンをクリックする。
- **システムの振る舞い**:
    - セッションを終了する。
    - ログインページへリダイレクトする。

## 2. タスク管理 (ダッシュボード)
### 2.1 タスク表示
- **アクター**: ログインユーザー
- **アクション**: `/dashboard` にアクセスする。
- **システムの振る舞い**:
    - `tasks` テーブルから、`user_id` が現在のユーザーと一致するタスクを取得する。
    - タスクを作成日順 (新しい順) に表示する。
    - タスクが存在しない場合は空の状態を表示する。

### 2.2 タスク作成
- **アクター**: ログインユーザー
- **アクション**: タスクのタイトルを入力し、「追加」をクリックする。
- **システムの振る舞い**:
    - `tasks` テーブルに `title`, `user_id` とデフォルトの `is_done = false` で新しいレコードを挿入する。
    - 入力フィールドをクリアする。
    - タスクリストを即座に更新する (Realtime または楽観的更新)。

### 2.3 完了状態の切り替え
- **アクター**: ログインユーザー
- **アクション**: タスクの横にあるチェックボックスをクリックする。
- **システムの振る舞い**:
    - データベース内の `is_done` ステータスを更新する。
    - タスクタイトルの取り消し線スタイルを切り替える。

### 2.4 タスク削除
- **アクター**: ログインユーザー
- **アクション**: タスクの「削除」ボタンをクリックする。
- **システムの振る舞い**:
    - `tasks` テーブルからレコードを削除する。
    - リストからタスクを削除する。

## 3. リアルタイム更新
- **機能**: マルチデバイス同期。
- **振る舞い**: あるデバイス/ブラウザタブで行われた変更 (追加、更新、削除) は、Supabase Realtime サブスクリプションを通じて、同じユーザーの他の開いているタブに即座に反映される。
